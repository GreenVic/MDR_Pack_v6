# Пример работы с контроллером тактовых частот CLK_Checker в 1986ВЕ8Т и Электросила

##  ОПИСАНИЕ:
Системный таймер, кнопки и светодиоды настраиваются при старте от HSI. Поэтому при работе от HSI светодиод LED1 от системного таймера должен мигать с периодом примерно 1сек. Дальше настраивается тактирование от HSE0 через PLL0 с более высокой частотой. Поэтому на самом деле светодиод начинает мигать гораздо чаще. После этого настраивается CLK_Checker в PLL0 который мониторит текущую частоту.

По кнопке KEY1 выключается PLL0, поэтому срабатывает CLK_Checker и переключает тактирование на HSI. Светодиод мигает с периодом ~1сек.
По кнопке KEY2 восстанавливается исходная частота от HSE0 через PLL0, светодиод возвращается к частому миганию.

На отладочной плате 1923DR014 нет кнопок, поэтому там сброс и восстановление частоты производятся циклично через 5 переключений светодиода.

## ОСОБЕННОСТИ:
После аварийного сброса на HSI, для восставновления частоты от от HSE0 через PLL0, необходимо предварительно переключиться на любую другую частоту. В данном тесте это HSI от MAXCLK. После этого можно выключить CLK_Checker и настроить рабочую частоту заново.

## ВАЖНО:
Если после аварийного перехода на HSI выключить CLK_Checker битом MDR_CLK_CHK_EN_Msk, то пропадает тактовая частота, отладчик отваливается! Если же CLK_Checker не выключить, то он продолжает мониторить частоту и сбрасывает ее аварийно на HSI.

## ERRATA:
Пример не работает на 1986ВЕ8Т ревизии 5, т.к. EVENTS в блоке не сбрасываются. Это будет внесено в errata.
