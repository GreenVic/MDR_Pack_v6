# Пример работы DMA с UART на передачу и прием данных.

DMA работает в основном режиме, используются только основные структуры каналов. Пример полностью аналогичен примеру DMA_SPI, только обмен происходит по UART.

   TX - Один канал DMA настроен на обработку запросов от UART по наличию пустого места в FIFO передатчика.
   RX - Еще один канал DMA настроен на обработку запросов от UART по наличию данных в FIFO приемника.

По нажатию на кнопку Up (Key1) запускается цикл передачи данных:
   - Загораются два светодиода (LED_CYCLIC, LED_ERR), показывая начало цикла DMA.
   - Канал DMA_TX копирует данные из массива в регистр DR передатчика UART, по мере появления пустого места в FIFO передатчика.
   - Передатчик передает данные по линии, которые получает приемник UART в свой регистр DR.
   - UART по приему слова выставляет запрос к DMA_RX, который копирует данные в массив принятых данных.
   - Данные сравниваются. Если данные не совпали, то второй светодиод (LED_ERR) остается включенным, показывая ошибку. Если данные совпали то LED_ERR выключается. Светодиод LED_CYCLIC вне обработчика кнопки UP постоянно мигает, показывая что исполнение не зависло в обработчике прерывания DMA.

На демоплате необходимо замкнуть контакты UART_TX и UART_RX, какие это именно контакты необходимо посмотреть по назначению пинов в структурах UART_TX_Pins и UART_RX_Pins. (Для 1986ВК234 это PB0-PC1.) Если сигналы не подключать, то светодиод LED_ERR остается гореть, показывая что передачи не было.

Пример работает как при включенном FIFO блока UART, так и при выключенном - это можно поменять в параметре .cfgBase.useFIFO = MDR_Off, структуры CfgUART.